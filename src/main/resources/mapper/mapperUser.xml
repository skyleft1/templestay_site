<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.mapperUser">
    
    <select id="getUserName" parameterType="string" resultType="string">        
        SELECT username
          FROM TB_user
         WHERE userid = #{userid}
    </select>
    
    <select id="getUserOne" parameterType="string" resultType="ModelUser">
        SELECT userid, username, userpassword  
          FROM TB_User 
         WHERE userid = #{userid}
    </select>
    
    <select id="getUserList" resultType="ModelUser">
        SELECT userno, userid, userpassword, username, useremail, phonenumber, joindate
          FROM TB_User
        ORDER BY username
    </select>         
        
    <insert id="insertUser" parameterType="ModelUser">
        INSERT INTO 
        TB_User ( userid, userpassword, username, useremail, phonenumber, joindate   )
        VALUES ( #{userid}, #{userpassword}, #{username}, #{useremail}, #{phonenumber}, #{joindate} )
    </insert>
    
    <insert id="insertUserList" parameterType="java.util.List">
        INSERT INTO tb_User( userid, userpassword, username, useremail, phonenumber, joindate )
        VALUES
            <foreach collection="list" item="item" index="index" open="(" separator="),(" close=")">
                #{item.userid} , #{item.userpassword} , #{item.username}, #{item.useremail} , #{item.phonenumber} , #{item.joindate}
            </foreach>
    </insert>
    
    
    
    <update id="updateUser" parameterType="hashmap">
        UPDATE TB_User 
            SET userid   = #{updateValue.userid}
              , userpassword     = #{updateValue.userpassword}
              , username = #{updateValue.username}
              , useremail  = #{updateValue.useremail}
              , phonenumber  = #{updateValue.phonenumber}
            WHERE 1 = 1 
              <if test="searchValue.userno != null and searchValue.userno != ''" >
              AND userno    = #{searchValue.userno}
              </if>
              <if test="searchValue.username != null and searchValue.username != ''">
              AND username  = #{searchValue.username}
              </if>

    </update>
    
    <delete id="deleteUser" parameterType="ModelUser">
        DELETE FROM TB_User 
         WHERE 1 = 1 
          <if test="userno != null and userno != ''" >
          AND userno  = #{userno}
          </if>
          <if test="username != null and username != ''">
          AND username  = #{username}
          </if>
    </delete>

 </mapper>
